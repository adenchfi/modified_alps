<html>
<head>
   <title>ALPS Project: tools</title>
</head>
<body>

<h1>
ALPS Project: tools</h1>

A number of <a href="#tools">tools</a> and <a href="#xslt">XSLT stylesheets</a> are being developed to simplify working with the XML files created by the ALPS libraries and programs. Please checkout some <a href="#examples">XML plot file examples</a>.

<H2>Documentation</H2>
<H3><a name="tools"/>Tools</H3>

<H4><a href="archive.html">archive</a></h4>

<H4>archivecat</h4>
Usage:
<blockquote>
<tt>archivecat </tt><i>filename</i> [<i>filename</i> [<i>filename</i> ...]]
</blockquote>
takes a list of XML files containing results of simulation checkpoints in a <tt>&lt;SIMULATION></tt> element of the <a href="http://xml.comp-phys.org/schema/QMCXML">QMCXML schema</a>. The tool strips off the leading processing instructions and wraps the various simulations inside a <tt>&lt;ARCHIVE></tt> element. This archive of simulation results can then be used by XSLT transformers, using for example the stylesheets provided below.

<H4>xslttransform</h4>

is a wrapper for XSLT processors to provide a uniform interface. The usage is:
<blockquote>
<tt> xslttransform </tt><i>file</i> [<i>stylesheet</i>]
</blockquote>
If the <i>stylesheet</i> argument is not given, the default stylesheet is taken from the XML input file.
<P>The XSLT processor is chosen as follows:
<UL>
<LI>If the environment variable ALPS_XSLT_TRANSFORMER is defined, the program it points to is used as transformer
<LI>Otherwise the standard path is searched for the Gnome <tt>xsltproc</tt> from <a href="http://xmlsoft.org/XSLT/">http://xmlsoft.org/XSLT/</a>.
<LI>If <tt> xsltproc</tt> is not found, the standard path is searched for <tt>xalan</tt> from the <a href="http://www.apache.org">Apache</a> project.
</UL>

<h4>extracttext</h4>

is a script which takes an XML plot file following the XML <a href="http://xml.comp-phys.org/schema/plot">schema for plot data</a> and an XML archive file containing results of simulation checkpoints in a <tt>&lt;SIMULATION></tt> element of the <a href="http://xml.comp-phys.org/schema/QMCXML">QMCXML schema</a> as provided
by <tt>archivecat</tt>. Alternatively a list of XML task files can be processed which the script wraps into an archive using <tt>archivecat</tt>.<br>
The tool first parses the plot file using <tt>plot2xsl.xsl</tt> generating a temporary settings file <tt>plotsettings.xsl</tt> which is subquently used by <tt>archive2plot.xsl</tt> to extract the specified data into a temporary plot file following the XML <a href="http://xml.comp-phys.org/schema/plot">schema for plot data</a>. In a last step <tt>plot2text.xsl</tt> is invoked to transform the temporary plot file into tabular plain text output.<p>

Alternative usage:
<blockquote>
<tt>extracttext </tt><i>plot-filename </i><i>archive-filename</i> <br>
<tt>extracttext </tt><i>plot-filename </i><i>task-filename</i> [<i>task-filename</i> [<i>task-filename</i> ...]]
</blockquote>

<h4>extracthtml</h4>

is a script which offers the same functionality as <tt>extracttext</tt> with the exception of converting the temporary plot file into tabular HTML output.<p>

Alternative usage:
<blockquote>
<tt>extracthtml </tt><i>plot-filename </i><i>archive-filename</i> <br>
<tt>extracthtml </tt><i>plot-filename </i><i>task-filename</i> [<i>task-filename</i> [<i>task-filename</i> ...]]
</blockquote>

<H4>plot2text</h4>
Usage:
<blockquote>
<tt>plot2text </tt><i>filename</i> 
</blockquote>
takes a XML plot file as argument and transforms it into tabular plain text output.


<H4>plot2html</h4>
Usage:
<blockquote>
<tt>plot2html </tt><i>filename</i> 
</blockquote>
takes a XML plot file as argument and transforms it into tabular HTML output.

<hr>

<h3><a name="xslt"/>XSLT stylesheets</h3>
XSLT transformations are the easisest way of extracting specific information from the large XML output files produced by thye ALPS libraries and programs. While we are working on a more flexible set of tools we provide some examples of simple XSLT style sheets that can help the beginning XSLT user:

<h4>plot2xsl.xsl</h4>
is an XSLT stylesheet to extract information from an XML plot file following the XML <a href="http://xml.comp-phys.org/schema/plot">schema for plot data</a> which specifies which information from a Monte Carlo output file should be extracted by the XSLT stylesheet <tt>archive2plot.xsl</tt>. The information is temporarily stored in yet another XSLT stylesheet (<tt>plotsettings.xsl</tt>).

<h4>archive2plot.xsl</h4>
is an XSLT stylesheet to extract information from a Monte Carlo output file and plot the value of a measured quantity as a function of a parameter, another measured quantity or an index as specified in the included XSLT stylesheet <tt>plotsettings.xsl</tt> generated by <tt>plot2xsl.xsl</tt>. This information is stored in a file following the XML <a href="http://xml.comp-phys.org/schema/plot">schema for plot data</a>.
<h4>plot2text.xsl</h4>
takes the output of e.g. the <tt>archive2plot.xsl</tt> transformation, stored in a file following the XML <a href="http://xml.comp-phys.org/schema/plot">schema for plot data</a> and converts it to tabular plain text output.

<h4>ALPS.xsl</h4>
takes the output of e.g. the <tt>archive2plot.xsl</tt> transformation, stored in a file following the XML <a href="http://xml.comp-phys.org/schema/plot">schema for plot data</a> and converts it to tabular HTML output. This is also the default stylesheet attached with the output of <tt>archive2plot.xsl</tt> to allow easy viewing in an XSLT supporting web browser.

</ul>
These stylesheets are installed in the <tt>xml</tt> subdirectory of the library installation directory.
<p>
We encourage your participation in the development of more flexible and powerful XSLT transformation tools. 

<hr>

<h3><a name="examples"/>XML plot file examples</h3>

<h4>Example 1: Energy versus temperature</h4>
<blockquote><code>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>
&lt;?xml-stylesheet type="text/xsl" href="ALPS.xsl"?&gt;<br>
<br>
&lt;plot name="Energy versus temperature for some model"&gt;<br>
<pre>
  &lt;!-- general plot description --&gt;
  &lt;legend show="true"/&gt;
  &lt;xaxis label="Temperature" type="PARAMETER" name="T"/&gt;
  &lt;yaxis label="Energy"      type="SCALAR_AVERAGE"/&gt;  

  &lt;!-- set description --&gt;
  &lt;set label="sprint "/&gt;
</pre>
&lt;/plot&gt;
</code></blockquote>

<h4>Example 2: Energy versus temperature for all system sizes</h4>
<blockquote><code>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>
&lt;?xml-stylesheet type="text/xsl" href="ALPS.xsl"?&gt;<br>
<br>
&lt;plot name="Energy versus temperature for some model"&gt;<br>
<pre>
  &lt;!-- general plot description --&gt;
  &lt;legend show="true"/&gt;
  &lt;xaxis label="Temperature" type="PARAMETER" name="T"/&gt;
  &lt;yaxis label="Energy"      type="SCALAR_AVERAGE"/&gt;
  
  &lt;!-- loop over all system sizes --&gt;
  &lt;for-each name="SystemSize"/&gt;
   
  &lt;!-- define some parameters --&gt;
  &lt;constraint name="U"  condition="=3.0" /&gt;
  &lt;constraint name="U'" condition="=4.0" /&gt;
  &lt;constraint name="t"  condition="=1.0" /&gt;
  &lt;constraint name="t'" condition="=2.0" /&gt;

  &lt;!-- restrict energy range --&gt;
  &lt;constraint name="Energy"  type="SCALAR_AVERAGE" condition="&amp;lt;0" /&gt;

  &lt;!-- set descriptions --&gt;
  &lt;set label="start "/&gt;
</pre>
&lt;/plot&gt;
</code></blockquote>

<em>Constraints used in this example</em><p>
The first constraint <code>&lt;for-each name="SystemSize"/&gt;</code> used in this example describes a loop over all possible values of the specified parameter. In the given example multiple sets are generated one for each system size found in the archive.<br>
The second set of constraints, e.g. <code>&lt;constraint name="U" condition="=3.0" /&gt;</code>, is
used to specify a set of parameters, such as U=3.0 U'=4.0 t=1.0 t'=2.0 in the given example.<br>
The last constraint <code>&lt;constraint name="Energy"  type="SCALAR_AVERAGE" condition="&lt;0" /&gt;</code> restricts
the energy range to negative values.<br>
The set label will be automatically generated from the prefix label <code>label="start "</code> in the set description and all the given constraints.

<h4>Example 3: Green's function versus distance</h4>
<blockquote><code>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>
&lt;?xml-stylesheet type="text/xsl" href="ALPS.xsl"?&gt;<br>
<br>
&lt;plot name="Green's function versus distance for some model"&gt;<br>
<pre>
  &lt;!-- general plot description --&gt;
  &lt;legend show="true"/&gt;
  &lt;xaxis label="Distance" type="INDEX"/&gt;
  &lt;yaxis label="Green's function" type="VECTOR_AVERAGE"/&gt;

  &lt;!-- index constraints --&gt;
  &lt;constraint label="d" type="INDEX" condition="&amp;gt;=2" /&gt;
  &lt;constraint label="d" type="INDEX" condition="&amp;lt;5" /&gt;

  &lt;set label="Some parameters of interest"/&gt;
</pre>
&lt;/plot&gt;
</code></blockquote>

<em>Constraints used in this example</em><p>
With the two index constraints shown in this example only Green's functions for distances d=2,3,4 are shown.

<h4>Example 4: Winding number versus energy</h4>
<blockquote><code>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>
&lt;?xml-stylesheet type="text/xsl" href="ALPS.xsl"?&gt;<br>
<br>
&lt;plot name="Winding number^2 versus energy for some model"&gt;
<pre>
  &lt;!-- general plot description --&gt;
  &lt;legend show="true"/&gt;
  &lt;xaxis label="Energy" type="SCALAR_AVERAGE"/&gt;
  &lt;yaxis label="Winding number^2" type="VECTOR_AVERAGE" index="0"/&gt;

  &lt;!-- set descriptions --&gt;
  &lt;set label="Not neccessarily useful"/&gt;
</pre>
&lt;/plot&gt;
</code></blockquote>

 <HR>
<ADDRESS>
    <p>copyright (c) 1994-2010 by <A HREF="mailto:troyer@comp-phys.org">Matthias Troyer</A></p>
    <p>Distributed under the Boost Software License, Version 1.0. 
    (See http://www.boost.org/LICENSE_1_0.txt)</p>
</ADDRESS>

</body>
</html>

